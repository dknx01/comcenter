{% extends 'base.html.twig' %}
{% block title %}Twitter Timeline{% endblock %}
{% block body %}

{{ kintDump(timelineArray) }}

    {% include  'AppBundle:Twitter:navigation.html.twig' with {'navigationElement': navigation} %}

    <div class="stream">
        <span class="headline">My Twitter Timeline</span>
    {% for key,timelineEntry in timeline %}
        <div id="{{ key }}" data-twitter="{{ timelineEntry.twitterId }}" data-from="{{ timelineEntry.from }}" class="tweet">
            <div>
                <div class="tweet_person">
                    <a href="{{ twitterUserUrl(timelineEntry.from) }}" target="_blank">
                        <img src="{{ timelineEntry.fromImage }}" alt="{{ timelineEntry.from }}" class="tweet_person_img"/><br>
                        <span class="small" style="color: black">{{ timelineEntry.from }}</span>
                    </a>
                </div>
            </div>
            <div>
                <div class="tweet_states">
                    {% set pinColor = '' %}
                    {% set pinTitle = 'pin it' %}
                    {% if timelineEntry.isPinned == true %}
                        {% set pinColor = 'pinned' %}
                        {% set pinTitle = 'unpin it' %}
                    {% endif %}
                    <span class="statistics glyphicon glyphicon-share badge" data-toggle="tooltip" data-placement="bottom" title="retweeted count">{{ timelineEntry.retweetCount }}</span>
                    <span class="statistics glyphicon glyphicon-heart-empty badge" data-toggle="tooltip" data-placement="bottom" title="favourite count">{{ timelineEntry.favoriteCount }}</span>
                    <span class="statistics glyphicon glyphicon-pushpin badge {{ pinColor }}" id="{{ key }}Pin" data-toggle="tooltip" data-placement="bottom" title="{{ pinTitle }}" onclick="pinEntry('{{ key }}');"> </span>
                    <span class="statistics glyphicon glyphicon-trash badge" data-toggle="tooltip" data-placement="bottom" title="delete" onclick="deleteEntry('{{ key }}');"> </span>
                    <span class="publishDate">{{ timelineEntry.createdAt|date('d.m.Y H:i') }}</span>
                </div>
                <div class="tweet_text">
                    {{ timelineEntry.text|raw }}
                </div>
            </div>
        </div>
    {% endfor %}
        <nav>
            <ul class="pager">
                {% if page > 0 %}
                <li class="previous"><a href="{{url~'/'~(page - 1) }}"><span aria-hidden="true">&larr;</span> Older</a></li>
                {% endif %}
                {% if page < ((timeline.count / perPage)|round(1, 'floor')) %}
                <li class="next"><a href="{{url~'/'~(page + 1) }}">Newer <span aria-hidden="true">&rarr;</span></a></li>
                {% endif %}
            </ul>
        </nav>
        <nav style="text-align: center">
            <ul class="pagination pagination-sm">
                {% for i in 0..((timeline.count / perPage)|round(1, 'floor')) %}
                    <li {% if i == page %}class="disabled"{% endif %}><a href="{{ url~'/'~i }}">{{ i }}</a></li>
                {% endfor %}
            </ul>
        </nav>
        {#{{ timeline.count }}#}
        {#<span class="next">Next</span>#}
    </div>
{% endblock %}

{% block stylesheets %}
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

    <style>
        body {
            background-color: black;
        }
        .user_mention {
            color: #0000F0;
        }
        .url_mention {
            color: #36A700;
        }
        .stream {
            margin-left: auto;
            margin-right: auto;
            max-width: 700px;
        }
        .tweet {
            /*max-height: 100px;*/
            max-width: 700px;
            background-color: #BFEFFD;
            border-radius: 10px 10px 10px 10px;
            margin-bottom: 10px;
            box-shadow: 5px 5px 5px #888;
            padding: 2px 2px 3px 2px;
            min-height: 82px;
        }
        .tweet_person {
            text-align: center;
            float: left;
/*            border: #777 5px solid;*/
            border-radius: 10px 10px 10px 10px;
            background-color: rgba(139, 184, 197, 0.6);
            margin-right: 10px;
	    padding: 2px;
	    box-shadow: 5px 0px 5px 0px rgba(0,0,0,0.75);
        }
        .tweet_person_img {
            vertical-align: middle; border-radius: 50px;
        }
        .tweet_text {
            /*background-color: beige;*/
            /*border-radius: 0px 0px 10px 0px;*/
        }
        .tweet_content {
            /*padding-left: 70px;*/
            word-wrap: break-word;
        }
        .tweet_states {
            color: #a94442;
            background-color: #dff0d8;
            border-radius: 10px 10px 0px 0px;
            /*padding-left: 5px;*/
            /*margin-left: 70px;*/
        }
        .twitter_hashtag {
            color: #337AB7;
        }
        .headline {
            color: white;
            text-align: center;
            font-weight: bold;
        }
        .pinned {
            color:rgb(0, 193, 0);
        }
        .publishDate {
            font-size: smaller;
            color: black;
        }
        #menu {
            margin: 0px 50px 10px 50px;
        }
        #menu>ul>li {
            background-color: aliceblue;
            border-radius: 5px;
        }
    </style>
{% endblock %}
{% block javascripts %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

    {% javascripts '@AppBundle/Resources/public/js/timeline.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
    {% javascripts '@AppBundle/Resources/public/js/notify.min.js' %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}